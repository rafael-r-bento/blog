# Parabola GNU/Linux-libre (x86_64) Installation

This particular installation assumes boot in UEFI mode and SystemD init system.
For detailed instructions, see [Installation Guide](https://wiki.parabola.nu/Installation_Guide).

## Download

First, download the **Parabola SystemD CLI ISO** and verify its signature and checksum.

```
$ wget https://redirector.parabola.nu/iso/x86_64-systemd-cli-2022.04/parabola-x86_64-systemd-cli-2022.04-netinstall.iso
$ wget https://repo.parabola.nu/iso/x86_64-systemd-cli-2022.04/parabola-x86_64-systemd-cli-2022.04-netinstall.iso.sig
$ gpg --keyserver pgp.cyberbits.eu --recv-keys 3954a7ab837d0ea9cfa9798925db7d9b5a8d4b40
$ gpg --verify parabola-x86_64-systemd-cli-2022.04-netinstall.iso.sig
$ wget https://repo.parabola.nu/iso/x86_64-systemd-cli-2022.04/SHA512SUMS
$ sha512sum -c SHA512SUMS
```

## Creating the Install Media on a USB Drive

Write the Parabola ISO media to the USB drive (in this case, the device file
for the USB drive is */dev/sdc*. Verify the correct device file name before
proceding to run the command below):

```
$ dd if=parabola-x86_64-systemd-cli-2022.04-netinstall.iso of=/dev/sdc bs=1M && sync
```

## Installation

Select "Parabola GNU/Linux-libre parabolaiso x86\_64 UEFI CD" from the live
medium menu.

![Step on boot installation showing four options](/assets/install_parabola1.png)

Select language and keyboard layout.

Configure keyboard layout (for a list of keymaps, type `localectl list-keymaps`):

```
# loadkeys br-abnt2
```

Partition the HD/SSD by using **cfdisk** command.

```
# cfdisk
```

![Screen showing the configuration for HD/SSD](/assets/install_parabola2.png)

List the partitions for verification with the **fdisk** command.

```
# fdisk -l
```

Format the partitions:

```
# mkfs.fat -F32 /dev/sda1
# mkswap /dev/sda2
# swapon /dev/sda2
# mkfs.ext4 /dev/sda3
```

Mount the partitions:

```
# mount /dev/sda3 /mnt
# mkdir -p /mnt/boot
# mount /dev/sda1 /mnt/boot
```

If you have wired internet access, just test the internet connection:

```
# ping -c 3 www.gnu.org
```

If you have only wireless internet available, follow the instructions in
[Installation Guide](https://wiki.parabola.nu/Installation_Guide#Wireless) and [Wireless Setup](https://wiki.parabola.nu/Wireless_Setup).

Verify the package signatures:

```
# pacman --needed -Syy archlinux-keyring parabola-keyring
```

Install the base system:

```
# pacstrap /mnt base
```

Install the **linux-libre** kernel:

```
# pacstrap /mnt linux-libre-vanilla
```

Instal the NetworkManager service:

```
# pacstrap /mnt networkmanager
```

Install the **parabola-base** meta-package:

```
# pacstrap /mnt parabola-base
```

Install the GRUB 2 bootloader:

```
# pacstrap /mnt grub
# pacstrap /mnt efibootmgr
```

## Configure the System

Generate an **fstab**:

```
# genfstab -p /mnt >> /mnt/etc/fstab
```

**chroot** into the installed system:

```
# arch-chroot /mnt
```

Edit the */etc/hosts* file like this:

#### **`/etc/hosts`**
```
127.0.0.1        localhost
::1             localhost
127.0.1.1       bentopc.localdomain     bentopc
```

Edit/create the file */etc/hostname* like this:

#### **`/etc/hostname`**
```
bentopc
```

Symlink */etc/localtime* to */usr/share/zoneinfo/Zone/SubZone*:

```
# ln -sf /usr/share/zoneinfo/America/Recife /etc/localtime
```

Open the */etc/locale.gen* file and uncomment the locale to be generated by the
**locale-gen** command.

Generate the locale with the **locale-gen** command:

```
# locale-gen
```

Add console keymap preferences in */etc/vconsole.conf* file:

#### **`/etc/vconsole.conf`**
```
KEYMAP=br-abnt2
```

Edit/create the file */etc/locale.conf* like this:

#### **`/etc/locale.conf`**
```
LANG=en_US.UTF-8
```

Re-generate the initial RAM-disk:

```
# mkinitcpio -p linux-libre-vanilla
```

Install GRUB in the boot disk and generate an appropriate boot menu file:

```
# grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub --recheck
# grub-mkconfig -o /boot/grub/grub.cfg
```

Set a root password:

```
# passwd
```

Create a normal user login and set a password:

```
# useradd -m bento
# passwd bento
```

## Update the System

Update the system:

```
# pacman --needed -Syy archlinux-keyring parabola-keyring
# pacman -Syu
```

## Un-mount and Reboot

Exit **chroot**, un-mount the partitions and reboot the system:

```
# exit
# swapoff /dev/sda2
# umount /mnt/boot
# umount /mnt
# reboot
```

## GNOME

Start and enable NetworkManager service:

```
# systemctl start NetworkManager
# systemctl enable NetworkManager
```

Install GNOME desktop environment:

```
# pacman -S gnome
```

Start **gdm** login screen:

```
# systemctl start gdm
```

Set the **gdm** service to run on system boot:

```
# systemctl enable gdm
# reboot
```

## Conclusion

Parabola GNU/Linux-libre installed successfully.

![Main Parabola GNU/Linux screen with GNOME after installation](/assets/install_parabola3.png)
