<h1>Parabola GNU/Linux-libre (x86_64) Installation</h1>
<p>This particular installation assumes boot in UEFI mode and SystemD init system. For detailed instructions, see
  <a href="https://wiki.parabola.nu/Installation_Guide">Installation Guide</a>.</p>
<h2>Download</h2>
<p>First, download the <strong>Parabola SystemD CLI ISO</strong> and verify its signature and checksum.</p>
<pre class="terminal" tabindex="0">$ wget https://redirector.parabola.nu/iso/x86_64-systemd-cli-2022.04/parabola-x86_64-systemd-cli-2022.04-netinstall.iso
$ wget https://repo.parabola.nu/iso/x86_64-systemd-cli-2022.04/parabola-x86_64-systemd-cli-2022.04-netinstall.iso.sig
$ gpg --keyserver pgp.cyberbits.eu --recv-keys 3954a7ab837d0ea9cfa9798925db7d9b5a8d4b40
$ gpg --verify parabola-x86_64-systemd-cli-2022.04-netinstall.iso.sig
$ wget https://repo.parabola.nu/iso/x86_64-systemd-cli-2022.04/SHA512SUMS
$ sha512sum -c SHA512SUMS</pre>
<h2>Creating the Install Media on a USB Drive</h2>
<p>Write the Parabola ISO media to the USB drive (in this case, the device file for the USB drive is <i>/dev/sdc</i>.
  Verify the correct device file name before proceding to run the command below):</p>
<pre class="terminal" tabindex="0">$ dd if=parabola-x86_64-systemd-cli-2022.04-netinstall.iso of=/dev/sdc bs=1M && sync</pre>
<h2>Installation</h2>
<p>Select "Parabola GNU/Linux-libre parabolaiso x86_64 UEFI CD" from the live medium menu.</p>
<div class="img-with-copyright large-img">
  <img src="/assets/install_parabola1.png" alt="Step on boot installation showing four options:
     Parabola GNU/Linux-libre parabolaiso x86_64 UEFI CD; UEFI Shell x86_64 v1; UEFI Shell x86_64 v2;
     and Reboot Into Firmware Interface">
  <div class="img-license">
    <span>©
      <a target="_blank" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>
      /
      Rafael Bento
    </span>
  </div>
</div>
<p>Select language and keyboard layout.</p>
<p>Configure keyboard layout (for a list of keymaps, type <code>localectl list-keymaps</code>):</p>
<pre class="terminal"># loadkeys br-abnt2</pre>
<p>Partition the HD/SSD by using <strong>cfdisk</strong> command.</p>
<pre class="terminal"># cfdisk</pre>
<div class="img-with-copyright large-img">
  <img src="/assets/install_parabola2.png" alt="Screen showing the configuration for HD/SSD">
  <div class="img-license">
    <span>©
      <a target="_blank" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>
      /
      Rafael Bento
    </span>
  </div>
</div>
<p>List the partitions for verification with the <strong>fdisk</strong> command.</p>
<pre class="terminal"># fdisk -l</pre>
<p>Format the partitions:</p>
<pre class="terminal"># mkfs.fat -F32 /dev/sda1
# mkswap /dev/sda2
# swapon /dev/sda2
# mkfs.ext4 /dev/sda3</pre>
<p>Mount the partitions:</p>
<pre class="terminal"># mount /dev/sda3 /mnt
# mkdir -p /mnt/boot
# mount /dev/sda1 /mnt/boot</pre>
<p>If you have wired internet access, just test the internet connection:</p>
<pre class="terminal"># ping -c 3 www.gnu.org</pre>
<p>If you have only wireless internet available, follow the instructions in
  <a href="https://wiki.parabola.nu/Installation_Guide#Wireless">Installation Guide</a> and <a href="https://wiki.parabola.nu/Wireless_Setup">Wireless Setup</a>.</p>
<p>Verify the package signatures:</p>
<pre class="terminal" tabindex="0"># pacman --needed -Syy archlinux-keyring parabola-keyring</pre>
<p>Install the base system:</p>
<pre class="terminal"># pacstrap /mnt base</pre>
<p>Install the <strong>linux-libre</strong> kernel:</p>
<pre class="terminal"># pacstrap /mnt linux-libre-vanilla</pre>
<p>Instal the NetworkManager service:</p>
<pre class="terminal"># pacstrap /mnt networkmanager</pre>
<p>Install the <strong>parabola-base</strong> meta-package:</p>
<pre class="terminal"># pacstrap /mnt parabola-base</pre>
<p>Install the GRUB 2 bootloader:</p>
<pre class="terminal"># pacstrap /mnt grub
# pacstrap /mnt efibootmgr</pre>
<h2>Configure the System</h2>
<p>Generate an <strong>fstab</strong>:</p>
<pre class="terminal"># genfstab -p /mnt >> /mnt/etc/fstab</pre>
<p><strong>chroot</strong> into the installed system:</p>
<pre class="terminal"># arch-chroot /mnt</pre>
<p>Edit the <i>/etc/hosts</i> file like this:</p>
<pre class="sourcecode-name">/etc/hosts</pre>
<pre class="sourcecode" tabindex="0">127.0.0.1        localhost
::1             localhost
127.0.1.1       bentopc.localdomain     bentopc</pre>
<p>Edit/create the file <i>/etc/hostname</i> like this:</p>
<pre class="sourcecode-name">/etc/hostname</pre>
<pre class="sourcecode">bentopc</pre>
<p>Symlink <i>/etc/localtime</i> to <i>/usr/share/zoneinfo/Zone/SubZone</i>:</p>
<pre class="terminal" tabindex="0"># ln -sf /usr/share/zoneinfo/America/Recife /etc/localtime</pre>
<p>Open the <i>/etc/locale.gen</i> file and uncomment the locale to be generated by the <strong>locale-gen</strong> command.</p>
<p>Generate the locale with the <strong>locale-gen</strong> command:</p>
<pre class="terminal"># locale-gen</pre>
<p>Add console keymap preferences in <i>/etc/vconsole.conf</i> file:</p>
<pre class="sourcecode-name">/etc/vconsole.conf</pre>
<pre class="sourcecode" tabindex="0">KEYMAP=br-abnt2</pre>
<p>Edit/create the file <i>/etc/locale.conf</i> like this:</p>
<pre class="sourcecode-name">/etc/locale.conf</pre>
<pre class="sourcecode">LANG=en_US.UTF-8</pre>
<p>Re-generate the initial RAM-disk:</p>
<pre class="terminal"># mkinitcpio -p linux-libre-vanilla</pre>
<p>Install GRUB in the boot disk and generate an appropriate boot menu file:</p>
<pre class="terminal" tabindex="0"># grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub --recheck
# grub-mkconfig -o /boot/grub/grub.cfg</pre>
<p>Set a root password:</p>
<pre class="terminal"># passwd</pre>
<p>Create a normal user login and set a password:</p>
<pre class="terminal" tabindex="0"># useradd -m bento
# passwd bento</pre>
<h2>Update the System</h2>
<p>Update the system:</p>
<pre class="terminal" tabindex="0"># pacman --needed -Syy archlinux-keyring parabola-keyring
# pacman -Syu</pre>
<h2>Un-mount and Reboot</h2>
<p>Exit <strong>chroot</strong>, un-mount the partitions and reboot the system:</p>
<pre class="terminal" tabindex="0"># exit
# swapoff /dev/sda2
# umount /mnt/boot
# umount /mnt
# reboot</pre>
<h2>GNOME</h2>
<p>Start and enable NetworkManager service:</p>
<pre class="terminal" tabindex="0"># systemctl start NetworkManager
# systemctl enable NetworkManager</pre>
<p>Install GNOME desktop environment:</p>
<pre class="terminal"># pacman -S gnome</pre>
<p>Start <strong>gdm</strong> login screen:</p>
<pre class="terminal"># systemctl start gdm</pre>
<p>Set the <strong>gdm</strong> service to run on system boot:</p>
<pre class="terminal" tabindex="0"># systemctl enable gdm
# reboot</pre>
<h2>Conclusion</h2>
<p>Parabola GNU/Linux-libre installed successfully.</p>
<div class="img-with-copyright large-img">
  <img src="/assets/install_parabola3.png" alt="Main Parabola GNU/Linux screen with GNOME after installation">
  <div class="img-license">
    <span>©
      <a target="_blank" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>
      /
      Rafael Bento
    </span>
  </div>
</div>
